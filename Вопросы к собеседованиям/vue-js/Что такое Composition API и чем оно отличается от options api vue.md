Composition API в Vue.js — это новый подход к написанию компонентов, при котором логика компонента организуется с помощью функций, а не через объект с опциями, как в Options API. Он был введён в Vue 3 для решения недостатков классического Options API и делает код компонентов более гибким и удобным для переиспользования.

---

## Что такое Composition API?

- Набор функций (API) для создания реактивного состояния, вычисляемых свойств, реактивных эффектов и хуков жизненного цикла.
- Позволяет объединять связанную логику в функциональные блоки (composables), которые удобно переиспользовать в разных компонентах.
- Всё описывается в функции `setup()`, которая вызывается при инициализации компонента.
- Ориентирован на композицию логики, а не на декларативное описание.

---

## Пример Composition API

```vue
<script setup>
import { ref, onMounted } from "vue";

// реактивное состояние
const count = ref(0);

// функция изменения состояния
function increment() {
  count.value++;
}

// хук жизненного цикла
onMounted(() => {
  console.log(`Начальное значение счётчика: ${count.value}`);
});
</script>

<template>
  <button @click="increment">Count is: {{ count }}</button>
</template>
```

---

## Основные отличия от Options API

| Отличие                | Options API                                   | Composition API                                   |
| ---------------------- | --------------------------------------------- | ------------------------------------------------- |
| Структура компонента   | Объект с опциями: data, methods, props и т.д. | Функция `setup()` с использованием реактивных API |
| Организация логики     | Разделена по типам опций (data, methods...)   | Логика группируется по смыслу, а не по типу       |
| Переиспользование      | Через миксины и HOC (сложно и проблематично)  | Через composable функции (удобно и чисто)         |
| Типизация (TypeScript) | Меньше точности                               | Более точная и удобная типизация                  |
| Сложность кода         | Простой для маленьких компонентов             | Более гибкий для больших и сложных                |

---

## Почему Composition API?

- Сложно поддерживать большие компоненты на Options API, когда логика распределена по частям.
- Миксины имеют проблемы с коллизиями имён и непрозрачностью.
- Composition API позволяет проще переиспользовать и тестировать логику.
- Улучшенная поддержка TypeScript.
- Позволяет более удобно управлять реактивным состоянием и жизненным циклом.

---

## Основные концепции Composition API

- `setup()` — точка входа, где описывается вся логика компонента.
- `ref()`, `reactive()` — создание реактивных данных.
- Хуки жизненного цикла: `onMounted()`, `onUnmounted()` и др.
- `provide()`/`inject()` — для передачи зависимостей между компонентами.
- Composables — функции, инкапсулирующие и переиспользующие логику.

---

## Итог

Composition API — это современный, мощный и гибкий способ организации кода Vue-компонентов, который решает проблемы старого Options API, улучшает переиспользование кода и облегчает поддержку крупных проектов, особенно с TypeScript.[1][4][5][6]

[1](https://ru.vuejs.org/guide/extras/composition-api-faq)
[2](https://tproger.ru/articles/obzor-vue-composition-api-realnost-okazalas-slozhnee)
[3](https://track.habr.com/frontend/skill/composition-api)
[4](https://purpleschool.ru/knowledge-base/article/composition)
[5](https://relex.ru/ru/blog/detail.php/vue-composition-vs-options-api-sravnivaem-dva-podkhoda-k-napisaniyu-koda/)
[6](https://solvit.space/roadmaps/17/topics/14/units/36)
[7](https://www.youtube.com/watch?v=uznMxYiyWgc)
[8](https://habr.com/ru/articles/863210/)
[9](https://dzen.ru/a/ZQg7Nxp0nnOXJYnX)
