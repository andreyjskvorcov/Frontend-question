Всплытие и погружение событий — это два этапа распространения события в модели DOM событий в браузерах.

---

### Основные стадии распространения событий

| Стадия                            | Описание                                                                                                                                                                                  |
| --------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Погружение (capturing phase)**  | Событие идет сверху вниз от корневого элемента (`window`) через родителей к целевому элементу. На этой стадии обработчики вызываются, если они зарегистрированы с опцией `capture: true`. |
| **Целевая стадия (target phase)** | Событие достигает целевого (исходного) элемента, на котором произошло действие. Здесь срабатывают обработчики на самом элементе, независимо от типа регистрации.                          |
| **Всплытие (bubbling phase)**     | После целевой стадии событие начинает подниматься вверх от целевого элемента к родителям, вызывая соответствующие обработчики с опцией `capture: false` или без неё (по умолчанию).       |

---

### Как работает всплытие и погружение

- При клике на вложенный элемент событие сначала «погружается» сверху вниз к нему (если используются обработчики на погружении).
- Затем срабатывают обработчики на самом целевом элементе.
- После этого событие «всплывает» вверх по дереву DOM к родителям, вызывая их обработчики.

---

### Пример кода с обработчиками

```js
const div = document.querySelector('div');
const button = document.querySelector('button');

div.addEventListener(
  'click',
  () => console.log('div обработчик на всплытии'),
  false
);
button.addEventListener(
  'click',
  () => console.log('button обработчик на всплытии'),
  false
);

div.addEventListener(
  'click',
  () => console.log('div обработчик на погружении'),
  true
);
button.addEventListener(
  'click',
  () => console.log('button обработчик на погружении'),
  true
);
```

Если кликнуть на `button`, вывод будет:

```
div обработчик на погружении
button обработчик на погружении
button обработчик на всплытии
div обработчик на всплытии
```

---

### Для чего это используется

- **Делегирование событий:** назначение одного обработчика на родительский элемент для обработки событий всех детей через всплытие.
- **Контроль порядка обработки:** счёт событий и прерывание их распространения с помощью методов `stopPropagation()`.
- **Оптимизация производительности:** уменьшение количества обработчиков.

---

### Итог

Всплытие и погружение — это механизм распространения событий в DOM: сначала событие «погружается» от корня к целевому элементу, затем «всплывает» обратно через предков. Понимание этого процесса помогает эффективно организовывать обработчики событий и управлять поведением приложения.[1][2][4][5][6]

[1](https://learn.javascript.ru/bubbling-and-capturing)
[2](https://itchief.ru/javascript/bubbling-and-capturing)
[3](https://habr.com/ru/articles/749376/)
[4](https://ru.hexlet.io/courses/js-dom/lessons/event-stages/theory_unit)
[5](https://code.mu/ru/javascript/book/prime/dom/object-Event/events-capturing/)
[6](https://learn.javascript.ru/event-bubbling)
[7](https://doka.guide/js/events/)
[8](https://proproprogs.ru/javascript_dom/pogruzhenie-i-vsplytie-sobytiy)
[9](https://tokmakov.msk.ru/blog/item/691)
[10](https://www.youtube.com/watch?v=nxwNhad4jtk)
