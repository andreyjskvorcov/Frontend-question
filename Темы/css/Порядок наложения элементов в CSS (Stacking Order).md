
---

### Что такое порядок наложения (Stacking Order) в CSS

Порядок наложения — порядок расположения элементов по оси Z, определяющий, какой элемент окажется сверху при перекрытии.

---

### Как работает порядок наложения?

- Элементы по умолчанию накладываются в порядке появления в DOM (снизу вверх).
- Элементы с `position` (`relative`, `absolute`, `fixed`, `sticky`) и заданным `z-index` могут перекрывать друг друга.
- Контексты наложения (stacking context) изолируют группы элементов, внутри которых порядок слоев независимый.

---

### Алгоритм наложения (упрощённо)

1. Корневой контекст (`html`).
2. Фон и границы элементов с `z-index: auto`.
3. Неконструированные блочные элементы без позиционирования (`position: static`).
4. Позиционированные элементы с `z-index: auto`.
5. Позиционированные элементы с `z-index` > 0.
6. Созданные stacking context: например, `transform`, `opacity < 1`, `filter`, `will-change`, `mix-blend-mode ≠ normal`.

---

### Что такое Stacking Context?

- Это изолированная область наложения.
- Слои внутри контекста расположены по собственным правилам, не влияя на родительские контексты.

---

### Как создается Stacking Context?

| Свойство                | Значение / поведение                 |
| ----------------------- | ------------------------------------ |
| `z-index`               | На элементе с `position` не `static` |
| `opacity`               | Меньше 1                             |
| `transform`             | Любое значение, кроме `none`         |
| `filter`, `will-change` | Любые значения                       |
| `mix-blend-mode`        | Значение, отличное от `normal`       |

---

### Пример с z-index

```html
<div class="box a" style="position: relative; z-index: 1;">A</div>
<div class="box b" style="position: relative; z-index: 2;">B</div>
```

Элемент `.b` окажется поверх `.a` потому что `2 > 1`.

---

### Частые ошибки

- `z-index` работает только на позиционированных элементах (`position` отличном от `static`).
- `z-index` не работает, если элемент не создаёт stacking context.
- Элемент с большим `z-index` может оказаться под элементом с меньшим, если они находятся в разных контекстах.

---

### Как проверить порядок наложения?

- В DevTools используйте вкладки:
  - "Elements" → "Computed" → `z-index`
  - "Layers" (в Chrome) для анализа stacking context.
- Временно добавьте `outline`, `border` или `background` для визуального понимания наложения.

---

### Советы

- Используйте `z-index` только при необходимости.
- Минимизируйте количество stacking context для упрощения отладки и предсказуемого поведения.

---

Если нужно, могу добавить примеры работы с позиционированием и z-index в Vue.js и React. Хотите?
