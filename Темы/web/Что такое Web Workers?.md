
---

# Что такое Web Workers?

**Web Worker** — механизм JavaScript, позволяющий запускать фоновые потоки для выполнения тяжёлых или длительных операций без блокировки основного интерфейса пользователя (UI).

С помощью Web Workers можно:

- Выполнять сложные вычисления
- Обрабатывать большие массивы данных
- Работать с canvas или WebAssembly
- Не замораживать интерфейс при высокой нагрузке

---

## Что не умеет Web Worker?

- Нет доступа к DOM
- Нельзя обращаться к объектам `window`, `document`, `alert`, `localStorage`
- Общение с основным потоком происходит только через обмен сообщениями (message passing)

---

## Пример: создание Web Worker

### worker.js — скрипт для воркера

```js
self.onmessage = function (e) {
  const result = e.data * 2;
  postMessage(result); // отправляем ответ в основной поток
};
```

### main.js — основной скрипт

```js
const worker = new Worker('worker.js');

worker.onmessage = function (e) {
  console.log('Ответ от воркера:', e.data);
};

worker.postMessage(21); // отправляем данные воркеру
```

В этом примере число 21 отправляется воркеру, он обрабатывает и возвращает 42.

---

## Преимущества Web Workers

- Асинхронность — тяжёлые задачи не блокируют UI.
- Повышение производительности — параллельная обработка данных.
- Простой API обмена сообщениями через `postMessage`.

---

## API Web Workers

| Метод / Событие        | Назначение                                   |
| ---------------------- | -------------------------------------------- |
| `new Worker(url)`      | Создаёт нового воркера                       |
| `worker.postMessage()` | Отправляет данные воркеру                    |
| `worker.onmessage`     | Получает данные из воркера                   |
| `worker.terminate()`   | Останавливает воркера принудительно          |
| `self.onmessage`       | Обрабатывает входящие сообщения в воркере    |
| `postMessage()`        | Отправляет ответ из воркера в основной поток |

---

## Где применять Web Workers?

- Обработка больших массивов данных
- Генерация графики и рендеринг
- Сжатие изображений
- Криптография
- Парсинг больших JSON/CSV файлов
- Machine Learning в браузере (с WebAssembly + Worker)

---

## Минусы и ограничения

- Отладка сложнее, чем обычного JS
- Нет доступа к DOM и объектам Window
- Работают по CORS, рекомендуется запускать с сервера

---

Источник: [Что такое Web Workers — hackfrontend](https://www.hackfrontend.com/docs/general-questions/web-workers)
