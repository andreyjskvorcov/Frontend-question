React Reconciliation (сверка) — это процесс, при котором React эффективно обновляет реальный DOM на основе изменений состояния или пропсов компонента. React сначала создаёт новое дерево виртуального DOM, затем сравнивает его с предыдущим, чтобы определить минимальный набор изменений, которые нужно применить к реальному DOM.[1][4]

### Как работает Reconciliation

1. **Сравнение типов элементов**  
   React сначала проверяет типы корневых элементов. Если типы разные, React полностью уничтожает старое дерево и строит новое с нуля.

2. **Сравнение элементов одного типа**  
   Если типы совпадают, React сравнивает атрибуты и свойства элементов, обновляя только изменённые. При этом скрытый DOM-узел сохраняется.

3. **Рекурсивное сравнение дочерних элементов (diffing)**  
   React рекурсивно сравнивает дочерние элементы старого и нового виртуального DOM — обновляет, удаляет или добавляет только изменённые узлы.

4. **Использование ключей (key) для списков**  
   При работе с массивами React сопоставляет узлы по ключам, что позволяет эффективно обновлять, переставлять или удалять элементы без полного пересоздания списка.

### Важные особенности

- React использует алгоритм Fiber, делящий процесс обновления на мелкие задачи, которые могут прерываться и возобновляться, что улучшает производительность и отзывчивость интерфейса.

- В процессе Reconciliation React формирует список изменений (effect list), который затем последовательно применяет к реальному DOM в отдельной фазе Commit Phase.

- Reconciliation обеспечивает вызов жизненных циклов (componentDidMount, componentDidUpdate) и хуков, таких как useEffect, после применения изменений.

### Пример простого обновления

При изменении состояния счётчика React создаст новое виртуальное дерево, сравнит его с предыдущим и обновит только текст внутри кнопки — не трогая весь DOM-узел.[4][1]

### Итог

Reconciliation — это ключевой механизм React, обеспечивающий эффективное и минимальное обновление пользовательского интерфейса за счёт сравнения виртуального DOM и последующего применения только нужных изменений в реальный DOM.[6][1][4]

[1](https://habr.com/ru/companies/gnivc/articles/899878/)
[2](https://ru.legacy.reactjs.org/docs/reconciliation.html)
[3](https://gemforge.ru/blog/reconciliation)
[4](https://habr.com/ru/companies/timeweb/articles/901212/)
[5](https://pcnews.ru/top/blogs/day/reconciliation_v_react_obnovlenia_virtualnogo_dom_cto_eto_i_kak_rabotaet_pod_kapotom_prostymi_slovami-1651514.html)
[6](https://www.hackfrontend.com/docs/react/react-fiber)
[7](https://gist.github.com/zagazat/db926ec7ab69061934246a55b64913c3)
[8](https://vk.com/wall-40137828_19398)
[9](https://easyadvice.ru/questions/frontend/how_does_react_reconciliation_work/)
[10](https://kramarenko.com.ua/post/what_is_reconciliation)
